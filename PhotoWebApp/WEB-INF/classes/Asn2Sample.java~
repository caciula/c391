import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class Asn2Sample extends HttpServlet {
	public void doGet(HttpServletRequest request, HttpServletResponse response)
		throws ServletException, IOException {

       String m_url = "jdbc:oracle:thin:@gwynne.cs.ualberta.ca:1521:CRS";
       String m_driverName = "oracle.jdbc.driver.OracleDriver";

       String m_userName = "tdphilli";
       String m_password = "*Mytacwease2";

       Connection m_con;
       createString = "create table TOFFEES " +

              "(T_NAME VARCHAR(32), " +
              "SUP_ID INTEGER, " +
              "PRICE FLOAT, " +
              "SALES INTEGER, " +
              "TOTAL INTEGER)";

       Statement stmt;

		String SQLStatement = request.getParameter("SQLStatement");
		response.setContentType("text/html");
		PrintWriter out = response.getWriter();
		out.println("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 " +
			"Transitional//EN\">\n" +
			"<HTML>\n" +
			"<HEAD><TITLE>Asn2Sample</TITLE></HEAD>\n" +
			"<BODY>\n" +
			"<H1>" +
			SQLStatement + 
			"</H1>\n" +
			"</BODY></HTML>");

       try
       {

              Class drvClass = Class.forName(m_driverName);
              DriverManager.registerDriver((Driver)
              drvClass.newInstance());

       } catch(Exception e)
       {

              System.err.print("ClassNotFoundException: ");
              System.err.println(e.getMessage());

       }

       try
       {

              m_con = DriverManager.getConnection(m_url, m_userName,
              m_password);

              stmt = m_con.createStatement();
              stmt.executeUpdate(createString);
              stmt.close();
              m_con.close();

       } catch(SQLException ex) {

              System.err.println("SQLException: " +
              ex.getMessage());

       }
		

	}
}
